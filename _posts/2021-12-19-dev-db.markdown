---
layout: post
title:  Design Database and SQL queries to enhance KPI measurement
date:   2021-12-19 09:17:01 +0300
image:  '/images/2021-12-19-dev-db/2021-12-19-main.jpg'
tags:   [Database, SQL, KPI]
---

## Summary

In this class project, our group **aimed to develop a classification model** that correctly classfies each posting in the video gaming category in Craiglist into a corresponding brand to enhance user experience and the company's key business performance. 

* **Tools / Libraries used:** SQL

* **Dataset:** Acquired from client / student(name, grade,) and course information

* **Analyses Performed:** Business Requirement Analysis, ERD, Relational Schema, Data Cleaning, Database Normalization

## Key Takeaways
* Our best model was gradient boosting, performed 81% accuracy in the test dataset. It was greater than the website's search rate which was 68%.
* It shows that our best model would provide more correct results and minimize information loss on the searches that users performed on the website.
* Therfore, we would expect that our model would contribute to an increase engagement of users with the webiste, leading to growth in retention rate and potentially generating more revenue.
* During the data cleaning process, we were successfully able to categorize each sample into a corresponding brand by using the scoring method. We scored each sample with keywords that were manually extracted and identified the highest score to match with a correct brand. We believe this scoring method would be very effective and scalable for categorization in further analyses.

<br>

## Details of the Project 


##### 1. Background
California University – Silicon Valley (CUSV) is a school that provides a master's program in Acupuncture and Oriental Medicine (AOM). The aim of the school is to train students to become AOM professionals, with the ability to practice as independent health care providers in a variety of setting including medicine theory, acupuncture, herbology & herbal formulas, Western medicine & science, Tui Na (traditional Chinese massage therapy), etc.

To be a Licensed Acupuncturist, one needs to pass a certification exam in the state of California. The average length for the program is 3.5 years including 143 credit hours course and 960 hours clinic internship. Once students finish their minimum credit hours and pass their comprehensive exam, they will be able to work an internship in the clinic which is also a requirement for a certificate.

Also, as a private school, CUSV must report its enrolment and pass statistics to the US government. Currently, they track these metrics manually, which is estimated to cost 3,000 USD per month. An automated database management system would save them this cost and time.

Therefore, we focus on their business scenario from the registration department to certification information including students, courses, instructors, certificates, etc. Try to develop a comprehensive database system that can truly help them examine metrics efficiently.
<div style='text-align:center'>
<h5>[Company Website]</h5>
</div>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-00.jpg" alt="2021-12-19-00.jpg" style="zoom:70%;" class="center" />
</div>

<br>
##### 2. Introduction: project objective
The primary objective for the school is to meet the requirements of the National Certification Commission for Acupuncture and Oriental Medicine (NCCAOM) including the ability to pass the acupuncture and herbal certification exams. Thus, our database system designed is to help trace the certification passing rate as well as other internal exam performance.
The database system can at the same time work well as the student management system which helps the school track the in-class as well as the internship performance.
<div style='text-align:center'>
<h5>[Business Requirement Analysis]</h5>
</div>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-01.jpg" alt="2021-12-19-01.jpg" style="zoom:70%;" class="center" />
</div>

<br>
##### 3. Database Design: ERD and Relational Schema
In our database, we have seven entities including Visitor, Student, Exam, Course, Category, Semester, GPAGrade and two associative entities including Take(Student-Exam) and Enroll(Student-Course).

<br>
<div style='text-align:center'>
<h5>[ER Diagram]</h5>
</div>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-02.jpg" alt="2021-12-19-02.jpg" />
</div>

<br>
<div style='text-align:center'>
<h5>[Relational Schema 1]</h5>
</div>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-03.jpg" alt="2021-12-19-03.jpg" />
</div>

<br>
<div style='text-align:center'>
<h5>[Relational Schema 2]</h5>
</div>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-04.jpg" alt="2021-12-19-04.jpg" style="zoom:70%;" class="center" />
</div>

* We decided to create a new table to store grades and their corresponding GPA values. This is because including the GPA value in the student_course associative entity would be a functional dependency so to normalize the entity, we created a mapping table.
* Every course has a course description associated with it (except core courses). If we included them all in the courses database, we would run into an anomaly if these were to change. Instead, we created a foreign key (ID) and linked it to a separate entity.
* It is important for the university to track how its students do on the certification exam. In order to track this, we created a separate exam entity. This is different from the other exams because it is offered by a separate agency, not the university.
* The university offers exams before and after the internship. The exam offered before the internship is called the Comprehensive Exam. The one after is the Graduation exam.
    - The exam after the internship is stored in the database as Graduation exam. The grade from this course will be the grade from the post-internship exam.
    - The grade from before the internship (the comprehensive exam) is a separate class by itself.
    - These were already how the university stored these exam grades so we decided to work with it.
* Similar to most other universities, the CRN is a code that is unique to every section across all years. CRNs will never be repeated once used.


<br>
##### 4. Queries
Purpose of Queries:  The purpose of using query is to manage students efficiently. CUSV managed students, course information, and exam passing rate manually. However, by using proper database and querying practices, we helped them manage students easily. CUSV also wanted to track and manage how many visitors end up enrolling in the institution (similar to managing a marketing funnel). We created a visitor entity and matched the visitorID to the student table, making this task easier.

* The percentage of visitors that convert into students: The client wants to track conversion rate to see how effective student visits are.  The client will be able to track how various promotions impact the conversion rate.
<br>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-code-01.jpg" alt="2021-12-19-code-01.jpg"  class="center" />
</div>

<br>
* The rate at which students retake the certificate exam: Understanding how frequently students fail exams will show whether or not there is a problem that needs addressing.  Currently, one in every four students will fail the state certification exam, something that may spur some action from the client to improve pass rates.
<br>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-code-02.jpg" alt="2021-12-19-code-02.jpg" class="center" />
</div>

<br>
* Top – Average GPA of students who pass the exam on the first try.  Bottom – Average GPA of students who fail the certification exam: The average GPA of students who fail the certificate exam at least once is lower than the average GPA of students who pass on the first try.  This might help the client identify those students who are at greatest risk of failing the certificate exam.
<br>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-code-03.jpg" alt="2021-12-19-code-03.jpg" class="center" />
</div>

<br>
* Breakdown of average GPA by category: There is significant variation in grades between categories – the client is now aware that there are factors that affect students’ grades outside of just their dedication to studying.
<br>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-code-04.jpg" alt="2021-12-19-code-04.jpg" class="center" />
</div>

<br>
* GPA of the top five courses, by highest GPA: This indicates that there are quite a few courses that seem very easy and/or are taught exceptionally well.  This is a factor in students’ grades.
<br>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-code-05.jpg" alt="2021-12-19-code-05.jpg" class="center" />
</div>

<br>
* GPA of the lowest five courses, by lowest GPA: This query, combined with the above query, shows that there is great difference between courses in terms of average GPA.  This should be something that the client considers when deciding how to improve coursework (whether to make it better or to get a better instructor) and when assessing which students are at risk of not graduating the program and passing the state certificate exam.
<br>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-code-06.jpg" alt="2021-12-19-code-06.jpg" class="center" />
</div>

<br>
* A table of all students who have a grade of C or lower: In order to pass the program, a student has to have a cumulative GPA greater than a C.  The above students should be supported in their effort to complete coursework and pass the state certification exam.
<br>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-code-07.jpg" alt="2021-12-19-code-07.jpg" class="center" />
</div>

<br>
* Top number – Average GPA of students who visited the university before enrolling.  Bottom number – Average GPA of students who did not visit the university before enrolling: Considering that GPA is an indicator of a student’s likelihood of passing the state exam, the fact that a student was a visitor before enrolling is an incredibly strong predictor of success within the program.  The client should consider what factors may make this fact reality and decide whether a strategy of enrolling more visitors should be implemented.
<br>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-code-08.jpg" alt="2021-12-19-code-08.jpg" class="center" />
</div>

<br>
* The average GPA for each of the summer, spring, and summer semesters present so far in the database: The above query highlights another factor in student GPA’s – spring courses tend to produce much higher grades than fall and summer courses.
<br>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-code-09.jpg" alt="2021-12-19-code-09.jpg" class="center" />
</div>

<br>
* An ordering of location of certificate examinations, by pass rate (descending): Since the university is concerned with pass rates for its students, it will be interested in seeing that some test sites show a greater pass rate than others, and that the most popular test site is the one with the lowest test rate.
<br>
<div style="text-align:center;">
<img src="../images/2021-12-19-dev-db/2021-12-19-code-10.jpg" alt="2021-12-19-code-10.jpg" class="center" />
</div>

<br>
##### 5. Business Insights and Recommendations